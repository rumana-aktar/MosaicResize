
%% ------------------------------------------------------------------------
%--mac, Itr 1, TT_40x142 =  3206.81 sec, noBlock_40x142 = 666141, TPBlock_40x142 = 0.00481 sec, TT =  4337.55 sec, noFrame = 8131, TPFrame = 0.53346 sec
%--mac, Itr 2, TT_40x142 =  2955.05 sec, noBlock_40x142 = 665905, TPBlock_40x142 = 0.00444 sec, TT =  4000.93 sec, noFrame = 8131, TPFrame = 0.49206 sec
%--mac, Itr 3, TT_40x142 =  2925.04 sec, noBlock_40x142 = 665956, TPBlock_40x142 = 0.00439 sec, TT =  3988.04 sec, noFrame = 8131, TPFrame = 0.49047 sec
%--mac, Itr 4, TT_40x142 =  3366.85 sec, noBlock_40x142 = 666016, TPBlock_40x142 = 0.00506 sec, TT =  4552.82 sec, noFrame = 8131, TPFrame = 0.55993 sec
%--mac, Itr 5, TT_40x142 =  2969.97 sec, noBlock_40x142 = 665747, TPBlock_40x142 = 0.00446 sec, TT =  4025.37 sec, noFrame = 8131, TPFrame = 0.49506 sec
%--mac, Itr 6, TT_40x142 =  2936.64 sec, noBlock_40x142 = 665767, TPBlock_40x142 = 0.00441 sec, TT =  3976.24 sec, noFrame = 8131, TPFrame = 0.48902 sec
%--mac, Itr 7, TT_40x142 =  3421.64 sec, noBlock_40x142 = 666185, TPBlock_40x142 = 0.00514 sec, TT =  4613.57 sec, noFrame = 8131, TPFrame = 0.56740 sec
%--mac, Itr 8, TT_40x142 =  2974.22 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.00447 sec, TT =  4029.46 sec, noFrame = 8131, TPFrame = 0.49557 sec
%--mac, Itr 9, TT_40x142 =  2960.01 sec, noBlock_40x142 = 666048, TPBlock_40x142 = 0.00444 sec, TT =  4022.64 sec, noFrame = 8131, TPFrame = 0.49473 sec
%--mac, Itr10, TT_40x142 =  2911.78 sec, noBlock_40x142 = 666048, TPBlock_40x142 = 0.00437 sec, TT =  3962.65 sec, noFrame = 8131, TPFrame = 0.48735 sec
%% ------------------------------------------------------------------------
%--mac, Itr 1,  3206.81, 666141, 0.00481,  4337.55, 8131, 0.53346
%--mac, Itr 2,  2955.05, 665905, 0.00444,  4000.93, 8131, 0.49206
%--mac, Itr 3,  2925.04, 665956, 0.00439,  3988.04, 8131, 0.49047
%--mac, Itr 4,  3366.85, 666016, 0.00506,  4552.82, 8131, 0.55993
%--mac, Itr 5,  2969.97, 665747, 0.00446,  4025.37, 8131, 0.49506
%--mac, Itr 6,  2936.64, 665767, 0.00441,  3976.24, 8131, 0.48902
%--mac, Itr 7,  3421.64, 666185, 0.00514,  4613.57, 8131, 0.56740
%--mac, Itr 8,  2974.22, 665576, 0.00447,  4029.46, 8131, 0.49557
%--mac, Itr 9,  2960.01, 666048, 0.00444,  4022.64, 8131, 0.49473
%--mac, Itr10,  2911.78, 666048, 0.00437,  3962.65, 8131, 0.48735
%% ------------------------------------------------------------------------
%--mean([0.00481 , 0.00444, 0.00439 , 0.00506, 0.00446, 0.00441, 0.00514, 0.00447, 0.00444, 0.00437]) = 0.004599 sec
%--mean([0.53346 , 0.49206, 0.49047 , 0.55993, 0.49525, 0.48902, 0.56740, 0.49557, 0.49473, 0.48735]) = 0.510524 sec
%% ------------------------------------------------------------------------

%% ------------------------------------------------------------------------
%--lewis, Itr 1, TT_40x142 = 11943.42 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01794 sec, TT = 15954.71 sec, noFrame = 8131, TPFrame = 1.96221 sec
%--lewis, Itr 2, TT_40x142 =  7866.21 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01182 sec, TT = 10301.23 sec, noFrame = 8131, TPFrame = 1.26691 sec
%--lewis, Itr 3, TT_40x142 =  8497.47 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01277 sec, TT = 11131.27 sec, noFrame = 8131, TPFrame = 1.36899 sec
%--lewis, Itr 4, TT_40x142 = 10021.60 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01506 sec, TT = 13256.89 sec, noFrame = 8131, TPFrame = 1.63041 sec
%--lewis, Itr 5, TT_40x142 =  7607.10 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01143 sec, TT =  9958.07 sec, noFrame = 8131, TPFrame = 1.22470 sec
%--lewis, Itr 6, TT_40x142 =  8643.89 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01299 sec, TT = 11329.69 sec, noFrame = 8131, TPFrame = 1.39339 sec
%--lewis, Itr 7, TT_40x142 =  8052.95 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01210 sec, TT = 10579.28 sec, noFrame = 8131, TPFrame = 1.30110 sec
%--lewis, Itr 8, TT_40x142 =  8110.28 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01219 sec, TT = 10621.39 sec, noFrame = 8131, TPFrame = 1.30628 sec
%--lewis, Itr 9, TT_40x142 = 10454.38 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01571 sec, TT = 13856.35 sec, noFrame = 8131, TPFrame = 1.70414 sec
%--lewis, Itr10, TT_40x142 = 10394.67 sec, noBlock_40x142 = 665576, TPBlock_40x142 = 0.01562 sec, TT = 13780.89 sec, noFrame = 8131, TPFrame = 1.69486 sec
%% ------------------------------------------------------------------------
%--lewis, Itr 1,  11943.42,  665576,   0.01794,  15954.71,  8131,   1.96221  
%--lewis, Itr 2,   7866.21,  665576,   0.01182,  10301.23,  8131,   1.26691  
%--lewis, Itr 3,   8497.47,  665576,   0.01277,  11131.27,  8131,   1.36899  
%--lewis, Itr 4,  10021.60,  665576,   0.01506,  13256.89,  8131,   1.63041  
%--lewis, Itr 5,   7607.10,  665576,   0.01143,   9958.07,  8131,   1.22470  
%--lewis, Itr 6,   8643.89,  665576,   0.01299,  11329.69,  8131,   1.39339  
%--lewis, Itr 7,   8052.95,  665576,   0.01210,  10579.28,  8131,   1.30110  
%--lewis, Itr 8,   8110.28,  665576,   0.01219,  10621.39,  8131,   1.30628  
%--lewis, Itr 9,  10454.38,  665576,   0.01571,  13856.35,  8131,   1.70414  
%--lewis, Itr10,  10394.67,  665576,   0.01562,  13780.89,  8131,   1.69486  

%% ------------------------------------------------------------------------
%--mean([0.01794, 0.01182, 0.01277, 0.01506, 0.01143, 0.01299, 0.01210, 0.01219, 0.01571, 0.01562])=0.013804
%--mean([1.96221, 1.26691, 1.36899, 1.63041, 1.22470, 1.39339, 1.30110, 1.30628, 1.70414, 1.69486])=1.490644
%% ------------------------------------------------------------------------

%%

clc;
clear all;
warning off;

for itr=1:10; 

    machine = 'mac';
    dirname=sprintf('/Volumes/F/Comparison_CUDA_NCC/TestCase3/Files/BlockCoords_mac/BlockCoord%d', itr);
%     dirnameOut='/Volumes/F/Comparison_CUDA_NCC/Files/BlockCoord_TestCase2_Lewis/NCC/Files/BlockCoord/';
%     if (~isdir(dirnameOut))
%         mkdir(dirnameOut);
%     end

    %
    % Extend name with 6 digit number format
    %check if you have enough images
    files = dir(fullfile(dirname,'Fr*.txt'));
    if( size(files,1) < 2 )
        disp('at least two images with appropriate format in the directory');
        return;
    end;


    %% read all image and find maxM and maxN   
    i=1;
    myData=[]; myDataFrame=[];
    while (i<=size(files,1))
        i;

        data = dlmread(fullfile(dirname, files(i).name));

        Ref_dm_IDs=data(:, 16);
        Ref_dn_IDs=data(:, 17);
        Cur_dm_IDs=data(:, 18);
        Cur_dn_IDs=data(:, 19);

        Ref_dm_IDs_40=find(Ref_dm_IDs==40);
        Ref_dn_IDs_40=find(Ref_dn_IDs==40);
        Cur_dm_IDs_142=find(Cur_dm_IDs==142);
        Cur_dn_IDs_142=find(Cur_dn_IDs==142);

        valid_row_IDs=intersect(Ref_dm_IDs_40, Ref_dn_IDs_40);
        valid_row_IDs=intersect(valid_row_IDs, Cur_dm_IDs_142);
        valid_row_IDs=intersect(valid_row_IDs, Cur_dn_IDs_142);

        valid_times=data(valid_row_IDs, 21);
        valid_times_sum=sum(valid_times(:));
        valid_row_count=size(valid_times,1);
        valid_rows=data(valid_row_IDs, [16 17 18 19]);

        myData=[myData; valid_times_sum valid_row_count];

        %% per frame information
        Frame_times_sum=sum(data(:,21));
        myDataFrame=[myDataFrame; [Frame_times_sum 1]];


        i=i+1;
    end

    sumMyData=sum(myData);
    avt_time=sumMyData(1,1)/sumMyData(1,2);

    sumMyDataFrame=sum(myDataFrame);
    avt_timeFrame=sumMyDataFrame(1,1)/sumMyDataFrame(1,2);

    sprintf('%s, Itr%2d, %8.2f, %d, %6.5f, %8.2f, %d, %6.5f', machine, itr, sumMyData(1,1), sumMyData(1,2), avt_time, sumMyDataFrame(1,1), sumMyDataFrame(1,2), avt_timeFrame)
    
    sprintf('%s, Itr%2d, TT_40x142 = %8.2f sec, noBlock_40x142 = %d, TPBlock_40x142 = %6.5f sec, TT = %8.2f sec, noFrame = %d, TPFrame = %6.5f sec', machine, itr, sumMyData(1,1), sumMyData(1,2), avt_time, sumMyDataFrame(1,1), sumMyDataFrame(1,2), avt_timeFrame)
end